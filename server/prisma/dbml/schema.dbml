//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table Event {
  id String [pk]
  name String [not null]
  categories Category [not null]
  isActive Boolean [not null, default: false]
  players Player [not null]
  matches Match [not null]
  places Place [not null]
  eventDoubles EventDouble [not null]
  startDate DateTime
  finishDate DateTime
  matchDurationInMinutes Int
  timeOfFirstMatch Int
  timeOfLastMatch Int
  games Game [not null]
  sets Set [not null]
  matchDates MatchDate [not null]
  eventType EventType [not null, default: 'ALLxALL']
  courts Court [not null]
}

Table Court {
  id String [pk]
  name String [not null]
  isAvailable Boolean [not null, default: true]
  events Event [not null]
  matches Match [not null]
  place Place [not null]
  placeId String [not null]
  matchDates MatchDate [not null]

  indexes {
    (name, placeId) [unique]
  }
}

Table EventDouble {
  event Event [not null]
  eventId String [not null]
  double Double [not null]
  doubleId String [not null]
  category Category [not null]
  categoryId String [not null]
  atRest MatchDate
  atRestId String

  indexes {
    (eventId, doubleId, categoryId) [pk]
  }
}

Table Category {
  id String [pk]
  level Int [not null]
  players Player [not null]
  doubles Double [not null]
  type CatType [not null]
  events Event [not null]
  matches Match [not null]
  eventDoubles EventDouble [not null]

  indexes {
    (level, type) [unique]
  }
}

Table Match {
  id String [pk]
  number Int [increment, not null]
  players Player [not null]
  isFinished Boolean [not null, default: false]
  category Category
  categoryId String
  winner Double
  winnerDoublesId String
  sets Set [not null]
  doubles Double [not null]
  event Event
  eventId String
  type MatchType [not null, default: 'SUPERSET']
  matchDate MatchDate
  court Court
  courtId String
}

Table MatchDate {
  id String [pk]
  event Event [not null]
  eventId String [not null]
  match Match
  matchId String [unique]
  start DateTime [not null]
  finish DateTime [not null]
  court Court [not null]
  courtId String [not null]
  atRest EventDouble [not null]

  indexes {
    (eventId, start, finish, courtId) [unique]
  }
}

Table Set {
  id String [pk]
  type SetType [not null, default: 'SUPER']
  doubles Double [not null]
  winner Double
  setWinnerId String
  result String
  match Match [not null]
  games Game [not null]
  isFinished Boolean [not null, default: false]
  events Event [not null]
}

Table Game {
  id String [pk]
  set Set [not null]
  setId String [not null]
  doubles Double [not null]
  winner Double
  winnerId String
  events Event [not null]
}

Table User {
  id String [pk]
  firstName String
  lastName String
  email String [unique, not null]
  password String [not null]
  dob DateTime
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  player Player
  playerId String [unique]
  role Role [not null, default: 'USER']
  hashedRt String
}

Table Player {
  id String [pk]
  firstName String
  lastName String
  categories Category [not null]
  position PlayerPosition
  matches Match [not null]
  doubles Double [not null]
  events Event [not null]
  user User
}

Table Double {
  id String [pk]
  players Player [not null]
  matchs Match [not null]
  category Category [not null]
  categoryId String [not null]
  games Game [not null]
  sets Set [not null]
  matchesWins Match [not null]
  setsWins Set [not null]
  gamesWins Game [not null]
  eventDouble EventDouble [not null]
}

Table Place {
  id String [pk]
  name String
  address String [unique]
  events Event [not null]
  courts Court [not null]
}

Table CategoryToEvent {
  categoriesId String [ref: > Category.id]
  eventsId String [ref: > Event.id]
}

Table EventToPlayer {
  playersId String [ref: > Player.id]
  eventsId String [ref: > Event.id]
}

Table EventToPlace {
  placesId String [ref: > Place.id]
  eventsId String [ref: > Event.id]
}

Table EventToGame {
  gamesId String [ref: > Game.id]
  eventsId String [ref: > Event.id]
}

Table EventToSet {
  setsId String [ref: > Set.id]
  eventsId String [ref: > Event.id]
}

Table CourtToEvent {
  courtsId String [ref: > Court.id]
  eventsId String [ref: > Event.id]
}

Table CategoryToPlayer {
  playersId String [ref: > Player.id]
  categoriesId String [ref: > Category.id]
}

Table MatchToPlayer {
  playersId String [ref: > Player.id]
  matchesId String [ref: > Match.id]
}

Table DoubleToMatch {
  doublesId String [ref: > Double.id]
  matchsId String [ref: > Match.id]
}

Table DoubleToSet {
  doublesId String [ref: > Double.id]
  setsId String [ref: > Set.id]
}

Table GamesPlayed {
  doublesId String [ref: > Double.id]
  gamesId String [ref: > Game.id]
}

Table DoubleToPlayer {
  doublesId String [ref: > Double.id]
  playersId String [ref: > Player.id]
}

Enum Role {
  USER
  ADMIN
}

Enum CatType {
  ALL
  F
  M
}

Enum PlayerPosition {
  REVES
  DRIVE
}

Enum SetType {
  NORMAL
  SUPER
}

Enum MatchType {
  BO3
  BO5
  SUPERSET
}

Enum EventType {
  ALLxALL
  GROUPS
}

Ref: Court.placeId > Place.id

Ref: EventDouble.eventId > Event.id

Ref: EventDouble.doubleId > Double.id

Ref: EventDouble.categoryId > Category.id

Ref: EventDouble.atRestId > MatchDate.id

Ref: Match.categoryId > Category.id

Ref: Match.winnerDoublesId > Double.id

Ref: Match.eventId > Event.id

Ref: Match.courtId > Court.id

Ref: MatchDate.eventId > Event.id

Ref: MatchDate.matchId - Match.id

Ref: MatchDate.courtId > Court.id

Ref: Set.setWinnerId > Double.id

Ref: Set.id > Match.id

Ref: Game.setId > Set.id

Ref: Game.winnerId > Double.id

Ref: User.playerId - Player.id

Ref: Double.categoryId > Category.id